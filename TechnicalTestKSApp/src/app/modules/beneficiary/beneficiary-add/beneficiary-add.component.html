<div class="container">    
    <div class="row">
        <div class="col-12">
            <h3>Beneficiaries</h3>
        </div>
    </div>
    <div class="row">
        <div class="col-7">
            <form>
                <div class="row">
                    <div class="col-5 mb-3">
                        <label for="name" class="form-label">Name</label>
                        <input type="text" class="form-control" id="name" placeholder="Name" name="name" [(ngModel)]="beneficiary.name">
                    </div>
                    <div class="col-5 mb-3">
                        <label for="lastName" class="form-label">Lastname</label>
                        <input type="text" class="form-control" id="lastName" placeholder="Lastname" name="lastName" [(ngModel)]="beneficiary.lastName">
                    </div>
                </div>
                <div class="row">
                    <div class="col-2 mb-3">
                        <label for="year" class="form-label">Year</label>
                        <select class="form-select" id="year" placeholder="Year" name="year" [(ngModel)]="birhtDate.year">
                            <option *ngFor="let year of dateSelectService.dateSelect.years" [ngValue]="year">{{year}}</option>
                        </select>
                    </div>
                    <div class="col-2 mb-3">
                        <label for="month" class="form-label">Month</label>
                        <select class="form-select" id="month" placeholder="Month" name="month" [(ngModel)]="birhtDate.month">
                            <option *ngFor="let month of dateSelectService.dateSelect.months" [ngValue]="month">{{month}}</option>
                        </select>
                    </div>
                    <div class="col-2 mb-3">
                        <label for="day" class="form-label">Day</label>
                        <select class="form-select" id="day" placeholder="Day" name="day" [(ngModel)]="birhtDate.day">
                            <option *ngFor="let day of dateSelectService.dateSelect.days" [ngValue]="day">{{day}}</option>
                        </select>
                    </div>
                    <div class="col-4 mb-3">
                        <label for="nationality" class="form-label">Nationality</label>        
                        <select class="form-select" id="nationality" placeholder="Nationality" name="nationalityId" [(ngModel)]="beneficiary.nationalityId">
                            <option value="0">Select an option</option>
                            <option *ngFor="let nationality of nationalityService.nationalities" [ngValue]="nationality.nationalityId">{{nationality.nationalityName}}</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-5 mb-3">
                        <label for="curp" class="form-label">Curp</label>
                        <input type="text" class="form-control" id="curp" placeholder="Curp" name="curp" [(ngModel)]="beneficiary.curp">
                    </div>
                    <div class="col-5 mb-3">
                        <label for="ssn" class="form-label">SSN</label>
                        <input type="text" class="form-control" id="ssn" placeholder="SSN" name="ssn" [(ngModel)]="beneficiary.ssn">
                    </div>
                </div>
                <div class="row">
                    <div class="col-5 mb-3">
                        <label for="phone" class="form-label">Phone</label>
                        <input type="text" class="form-control" id="phone" placeholder="Phone" name="phone" [(ngModel)]="beneficiary.phone">
                    </div>
                    <div class="col-5 mb-3">
                        <label for="beneficiaryNumber" class="form-label">Percentage of participation</label>
                        <input type="number" class="form-control" id="participationPercentage" placeholder="Percentage of participation" name="participationPercentage" [(ngModel)]="beneficiary.participationPercentage">
                    </div>
                </div>
                <div class="row">
                    <div class="col-5"></div>
                    <button type="button" class="col-2 me-2 btn btn-outline-secondary" (click)="cancel()">Cancel</button>
                    <button type="button" class="col-2 ms-2 btn btn-primary" *ngIf="!isEditMode" (click)="add()">Add</button>
                    <button type="button" class="col-2 ms-2 btn btn-success" *ngIf="isEditMode" (click)="edit(isEditModeIndexId)">Edit</button>
                </div>
            </form>
        </div>
        <div class="col-5">
            <table class="table">
                <thead>
                  <tr>
                    <th scope="col">% Participation</th>
                    <th scope="col">Name</th>
                    <th scope="col">Lastname</th>
                    <th scope="col"></th>
                  </tr>
                </thead>
                <tbody class="table-group-divider" *ngIf="activateBeneficiaries && activateBeneficiaries.length > 0">
                  <tr *ngFor="let b of activateBeneficiaries">
                    <th scope="row">{{b.participationPercentage}} %</th>
                    <td>{{b.name}}</td>
                    <td>{{b.lastName}}</td>
                    <td><button type="button" class="btn btn-success" (click)="setEdit(b.indexId)">edit</button></td>
                    <td><button type="button" class="btn btn-danger" (click)="delete(b.indexId)">X</button></td>
                  </tr>
                  <tr>
                    <th scope="row">{{participationTotal}} %</th>
                  </tr>
                </tbody>
                <tbody  *ngIf="!beneficiaries || beneficiaries.length === 0">
                    <tr class="Text-Center">
                        <td colspan="10">beneficiaries not found.</td>
                    </tr>
                </tbody>
            </table>
            <button type="button" class="col-2 ms-2 btn btn-primary" (click)="submit()">Apply changes</button>
        </div>
    </div>
</div>